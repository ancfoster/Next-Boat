{% extends "base.html" %}
{% load static %}
{% block head %}
<link rel="stylesheet" href="{% static 'css/delete_listing.css' %}"> </link>
<link rel="stylesheet" href="{% static 'css/conversation.css' %}"> </link>
<title>Messages - NextBoat</title>
{% endblock %}
{% block content %}
<main>
    <h1>Messages</h1>
    {% if conversations_list %}
    {% for conversation in conversations_list %}
    <a href="{% url 'conversation_messages' conversation.pk %}" class="cont-a">
    <div class="conversation-cont">
        <div class="conversation-bubbles">
            <div class="bubble-username">
                {% if conversation.conversation_seller|stringformat:"s" == user.get_username %}
                    {{ conversation.conversation_buyer|stringformat:"s"|slice:":1" }}
                {% else %}
                    {{ conversation.conversation_seller|stringformat:"s"|slice:":1" }}
                {% endif %}
            </div>
            <img class="bubble-featured-image" src="{{ conversation.conversation_thumbnail.url }}">
        </div>
        <div class="conversation-text-flex">
            <div class="conversation-username">
                {% if conversation.conversation_seller|stringformat:"s" == user.get_username %}
                    {{ conversation.conversation_buyer }}
                 {% else %}
                    {{ conversation.conversation_seller }}
                {% endif %}
            </div>
            <div class="conversation-boat-name">
                {{ conversation.conversation_boat.get_make_display }} {{ conversation.conversation_boat.model }}
            </div>
            <div class="conversation-date">Last message: {{ conversation.last_message_date|date:"d / m / y H:i" }}</div>
        </div>
    </div>
    </a>
    {% endfor %}
{% else %}
    <div id="no-messages">You have no messages.</div>
{% endif %}
</main>
{% endblock %}